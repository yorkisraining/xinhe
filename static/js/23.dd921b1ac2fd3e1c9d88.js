webpackJsonp([23],{HKws:function(s,t){},w7qI:function(s,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=e("g3lQ"),n=e("PI0u"),a={name:"forgetPassword",components:{globalBtn:e("je3u").a},data:function(){return{userMsg:{phone:"",smsCode:"",password:"",repassword:""},countDownMsg:"获取验证码",countDefaultTime:61,countTime:61,countFlag:!1,timer:"",temporaryVal:"",subminBtn:{value:"确认信息",status:"normal register_btn",btnState:!1}}},methods:{maxLength:function(s,t){var e=30;return"smsCode"==t&&(e=6),s.length>e?(s=s.substring(0,e),this.userMsg[t]=s,s):s},checkPhone:function(s){return!!/^1[34578]\d{9}$/.test(s)},notifyIt:function(s){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;this.$notify({message:s,duration:t})},setPayTime:function(){var s=this;clearTimeout(this.timer),this.countFlag=!0;!function t(){0==s.countTime?(s.timeFlag=!1,s.countTime=s.countDefaultTime):(s.countTime--,s.timer=setTimeout(function(){t()},1e3))}()},confirm:function(){for(var s in this.userMsg)if(""==this.userMsg[s])return console.log("信息不能为空"),this.notifyIt("信息不能为空"),void!1;if(!this.checkPhone(this.userMsg.phone))return console.log("手机号错误"),this.notifyIt("手机号错误"),!1,!1;if(this.userMsg.password>14||this.userMsg.password<8)return this.notifyIt("密码长度为8-14位"),console.log("密码长度不合规范"),!1,!1;if(this.userMsg.password!==this.userMsg.repassword)return console.log("密码不一致"),this.notifyIt("密码不一致"),!1,!1;this.subminBtn.btnState=!0,console.log("修改！");var t=this;data={resultCode:1e3},console.log(data),t.subminBtn.btnState=!1,1e3==data.resultCode?(console.log("修改成功"),t.$dialog.alert({title:"修改成功！",message:"密码修改成功，请重新登录。"}).then(function(){t.$router.push({name:"login"})})):1001==data.resultCode?(console.log("无效操作"),t.notifyIt("无效操作")):3001==data.resultCode?(console.log("验证码错误"),t.notifyIt("验证码错误")):3002==data.resultCode?(console.log("验证码失效"),t.notifyIt("验证码失效")):1111==data.resultCode&&(console.log("手机号未注册"),t.notifyIt("手机号未注册"))},getCode:function(){if(!this.countFlag)if(this.checkPhone(this.userMsg.phone)){var s=this;Object(n.a)(o.a.getSystemSMS,{module:"resetPs",phone:this.userMsg.phone},function(t){1e3==(t=t.data.body).resultCode?(console.log("发送验证码成功"),s.setPayTime()):1001==t.resultCode?(console.log("参数为空，验证码错误"),s.notifyIt("参数为空，验证码错误")):1110==t.resultCode?(console.log("网络繁忙"),s.notifyIt("网络繁忙")):3004==t.resultCode?(console.log("请不要频繁操作"),s.notifyIt("请不要频繁操作")):1111==t.resultCode?(console.log("手机号未注册"),s.notifyIt("手机号未注册")):3005==t.resultCode&&(console.log("今天您的验证码次数已经达到上限"),s.notifyIt("今天您的验证码次数已经达到上限"))},function(){s.notifyIt("网络繁忙")})}else this.notifyIt("手机号错误"),console.log("手机号错误")}},watch:{countTime:function(s,t){t>0?this.countDownMsg="重新获取("+this.countTime+"s)":(this.countFlag=!1,this.countDownMsg="获取验证码")},"userMsg.password":function(s){this.userMsg.password=this.maxLength(s,"password")},"userMsg.repassword":function(s){this.userMsg.repassword=this.maxLength(s,"repassword")},"userMsg.phone":function(s){this.userMsg.phone=this.maxLength(s,"phone")},"userMsg.smsCode":function(s){this.userMsg.smsCode=this.maxLength(s,"smsCode")}}},r={render:function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ul",{attrs:{id:"changePassword"}},[e("li",[e("span",{staticClass:"leftCon"},[s._v("手机号码")]),s._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:s.userMsg.phone,expression:"userMsg.phone"}],staticClass:"formInput",attrs:{type:"text",placeholder:"请输入手机号码"},domProps:{value:s.userMsg.phone},on:{input:function(t){t.target.composing||s.$set(s.userMsg,"phone",t.target.value)}}}),s._v(" "),e("span",{staticClass:"getCode",class:1==s.countFlag?"disabled_btn":"",on:{click:s.getCode}},[s._v(s._s(s.countDownMsg))])]),s._v(" "),e("li",[e("span",{staticClass:"leftCon les4"},[s._v("验证码")]),s._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:s.userMsg.smsCode,expression:"userMsg.smsCode"}],staticClass:"formInput",attrs:{type:"text",placeholder:"请输入手机验证码"},domProps:{value:s.userMsg.smsCode},on:{input:function(t){t.target.composing||s.$set(s.userMsg,"smsCode",t.target.value)}}})]),s._v(" "),e("li",[e("span",{staticClass:"leftCon les4"},[s._v("新密码")]),s._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:s.userMsg.password,expression:"userMsg.password"}],staticClass:"formInput",attrs:{type:"password",placeholder:"请输入新密码,长度为8-14位"},domProps:{value:s.userMsg.password},on:{input:function(t){t.target.composing||s.$set(s.userMsg,"password",t.target.value)}}})]),s._v(" "),e("li",[e("span",{staticClass:"leftCon"},[s._v("确认密码")]),s._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:s.userMsg.repassword,expression:"userMsg.repassword"}],staticClass:"formInput",attrs:{type:"password",placeholder:"再次输入新密码"},domProps:{value:s.userMsg.repassword},on:{input:function(t){t.target.composing||s.$set(s.userMsg,"repassword",t.target.value)}}})]),s._v(" "),e("globalBtn",{staticClass:"sureButton",attrs:{value:s.subminBtn.value,status:s.subminBtn.status,btnState:s.subminBtn.btnState},on:{validateCode:s.confirm}})],1)},staticRenderFns:[]};var i=e("VU/8")(a,r,!1,function(s){e("HKws")},"data-v-694316c8",null);t.default=i.exports}});
//# sourceMappingURL=23.dd921b1ac2fd3e1c9d88.js.map