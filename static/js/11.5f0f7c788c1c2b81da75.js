webpackJsonp([11],{"2COj":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=o("je3u"),n=o("g3lQ"),i=o("PI0u"),a={data:function(){return{goodsName:"挂号费",billCode:this.$store.state.wmodule.curBillCode,billId:"",curFee:this.$store.state.wmodule.curFee,doctName:this.$store.state.wmodule.curDoctorName,deptName:this.$store.state.wmodule.curDeptName,hospName:this.$store.state.wmodule.curHospitalName,signType:this.$store.state.wmodule.curDoctorLevel,appointmentDate:this.$store.state.wmodule.curAppointmentDate,appointmentTime:this.$store.state.wmodule.curAppointmentTime,hospId:this.$store.state.wmodule.curHospitalId,deptId:this.$store.state.wmodule.curDeptId,doctId:this.$store.state.wmodule.curDoctorId,doctorSignTimeId:this.$store.state.wmodule.curAppointmentNumId,doctorScheduleId:this.$store.state.wmodule.curDoctScheduleId,subminBtn:{value:"确认支付",status:"normal register_btn",btnState:!1},ifPaySuccessCount:0,ifRecallAppointment:!1}},components:{globalBtn:s.a},created:function(){console.log(this.$store.state.wmodule),console.log(this.$store.state.wmodule)},computed:{curAppointmentStartTime:function(){return this.$store.state.wmodule.curAppointmentStartTime},curAppointmentEndTime:function(){return this.$store.state.wmodule.curAppointmentEndTime},updataBillCode:function(){return this.$store.state.wmodule.curBillCode},updataFee:function(){return this.$store.state.wmodule.curFee},updataDeptName:function(){return this.$store.state.wmodule.curDeptName},updataDoctName:function(){return this.$store.state.wmodule.curDoctorName},updataHospName:function(){return this.$store.state.wmodule.curHospitalName},updataSignType:function(){return this.$store.state.wmodule.curDoctorLevel},updataHospId:function(){return this.$store.state.wmodule.curHospitalId},updataDeptId:function(){return this.$store.state.wmodule.curDeptId},updataDoctId:function(){return this.$store.state.wmodule.curDoctorId},updataDoctorSignTimeId:function(){return this.$store.state.wmodule.curAppointmentNumId},updataDoctorScheduleId:function(){return this.$store.state.wmodule.curDoctScheduleId},updateAppointmentDate:function(){return this.$store.state.wmodule.curAppointmentDate},updateAppointmentTime:function(){return this.$store.state.wmodule.curAppointmentTime}},watch:{updataBillCode:function(t,e){this.billCode=t},updataFee:function(t,e){this.curFee=t},updataDeptName:function(t,e){this.deptName=t},updataDoctName:function(t,e){this.doctName=t},updataHospName:function(t,e){this.hospName=t},updataSignType:function(t,e){this.signType=t},updataHospId:function(t,e){this.hospId=t},updataDeptId:function(t,e){this.deptId=t},updataDoctId:function(t,e){this.doctId=t},updataDoctorSignTimeId:function(t,e){this.doctorSignTimeId=t},updataDoctorScheduleId:function(t,e){this.doctorScheduleId=t},updateAppointmentDate:function(t,e){this.appointmentDate=t},updateAppointmentTime:function(t,e){this.appointmentTime=t}},methods:{wxPayFn:function(t,e,o,s){this.$router.push("/appointment/paySuccess")},confirmToPay:function(){var t=this;this.subminBtn.btnState=!0;var e=this;e.$dialog.confirm({message:"请输入密码",title:"支付订单"}).then(function(){Object(i.a)(n.a.updateBillByBillCode,{status:"1",billCode:e.billCode},function(o){if(e.subminBtn.btnState=!1,1e3==(o=o.data.body).resultCode){!function o(){Object(i.a)(n.a.getBillWithSignDetByBillCode,{billCode:e.billCode},function(s){1e3==(s=s.data.body).resultCode?(e.billId=s.data.id,console.log(e.signType),function o(){Object(i.a)(n.a.add,{billCode:e.billCode,deptName:e.deptName,doctName:e.doctName,signTimeStart:e.appointmentDate+" "+e.curAppointmentStartTime+":00",signTimEnd:e.appointmentDate+" "+e.curAppointmentEndTime+":00",signFee:100*e.curFee+"",signType:e.signType,feeType:"1",userId:JSON.parse(sessionStorage.getItem("userInfo")).userId,hospId:e.hospId,deptId:e.deptId,doctId:e.doctId,remark:"",createUser:JSON.parse(sessionStorage.getItem("userInfo")).userName,updateUser:JSON.parse(sessionStorage.getItem("userInfo")).userName,billId:e.billId,hospName:e.hospName,doctorSignTimeId:e.doctorSignTimeId,doctorScheduleId:e.doctorScheduleId},function(e){e=e.data.body,t.$router.push("/appointment/paySuccess")},function(t){e.ifRecallAppointment?e.$dialog.alert({message:"创建预约失败，请联系客服"}).then(function(){e.$router.push("/user/userOptions")}):(e.ifRecallAppointment=!0,o())})}()):e.ifPaySuccessCount<3?setTimeout(function(){e.ifPaySuccessCount++,o()},1e3):e.$dialog.alert({message:"支付失败"}).then(function(){t.$router.push("/user/myOrder")})})}()}},function(){e.subminBtn.btnState=!1,t.$notify({message:"服务器错误",duration:1e3}).then(function(){t.$router.push("/user/myOrder")})})}).catch(function(){t.$router.push("/user/myOrder")})},scan:function(){wx.scanQRCode({needResult:1,scanType:["qrCode","barCode"],success:function(t){t.resultStr}})},location:function(){wx.getLocation({type:"wgs84",success:function(t){var e=t.latitude,o=t.longitude,s=t.speed,n=t.accuracy;console.log(e,o,s,n)}})}}},u={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{staticClass:"order_msg_block"},[o("div",{staticClass:"msg_money"},[t._v("￥"+t._s(t.curFee))]),t._v(" "),o("div",{staticClass:"msg_item"},[t._v("商品名称："+t._s(t.goodsName))]),t._v(" "),o("div",{staticClass:"msg_item"},[t._v("订单编号："+t._s(t.billCode))])]),t._v(" "),t._m(0),t._v(" "),o("globalBtn",{attrs:{value:t.subminBtn.value,status:t.subminBtn.status,btnState:t.subminBtn.btnState},on:{validateCode:t.confirmToPay}})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"pay_methods_block"},[e("div",{staticClass:"pay_methods_title"},[this._v("选择支付方式")]),this._v(" "),e("div",{staticClass:"pay_methods_list"},[e("div",{staticClass:"pay_methods_items clear"},[e("div",{staticClass:"pay_methods_items_block"},[e("img",{staticClass:"pay_methods_icon",attrs:{src:o("jEty")}}),this._v(" "),e("span",[this._v("微信支付")])]),this._v(" "),e("div",{staticClass:"pay_methods_items_block"},[e("img",{staticClass:"pay_methods_select_status",attrs:{src:o("FxMs")}})])])])])}]};var r=o("VU/8")(a,u,!1,function(t){o("Eqz9")},"data-v-e4151ac2",null);e.default=r.exports},Eqz9:function(t,e){},FxMs:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAzNJREFUWAnFV0FoE0EUfbNprZIialDaIJhgUaqiF1M8eLAXtS2o8VAU8eLBYgqC3kQQafEqiJh68iaKCBXB4q0ePCi9KRWUYoOEKJYKCoHW2oz/z+yku5tku5smOoed2Zn5/7358+fPH4GART7Zuw7zxV6UxAlIuYfE4hAyrsSlKFBdgBAfYMnniEUnxeD07yCqxWqT5L1EBwRuoIRzgNy42nw9Ln7BwkNIjIjh3Dc/mZoE5ERXG2aXrpOSq6Qg6qfEZ6xI5G8j2XpL9M8sVptXlYBaNTBOpj5UTSh0nxBvSCZdzRoVBGQ2uR+l0gsS2B4ayF8gj9ZIvxj6/N45zUVArVzKqSaAG8w8OWrKaQnLjKg9Z7M3fuUGgmu26riNpfrLBLTDNWjPleoaH/Yrdm67qC2wTT9DffV6u9EXtKbTIbp4K7QF+Jw3C3z9FuD0U2DggZNcVMUW6rFUhFNBxjneoDaDn3oEdB4E2jwxjDAZ21LhNXCEC0HMgMd2A/MfgYmLHmGKqhTaLRXbPUPoHgT2nff2Bv/fEKOVPwYM+LOzwMKPSnm6V1rsi8U92HMFaO8ENiWB1yPusdX+eOUnyeyxXXrltcBZD11q7IT6RnMqnrwGLC8CBy4Ah9k/AxZldl55AHCtMm6Vr1QnxpdXtGdD4UiEBwdj62PoBDftMCRc4J8AP7Mb/aoW0oJOJlzd5Z8gJCrAz1R3uLJSR0PiK1uAs5naxY/EWsA1YiFyc2BzD7ljqjYDGvmZA+amgZ19FFRoansH8GcBOHrXdjg2e4iVGzBhTQg5ljiGZfnS9PnWO3qBvvtApG1l2nyd4KwhIo4LFYq/F+cC53uxbiB1maxAp7fwFpi6AywVVwgFblHeuC26Vd+G2UQWJXkpsGwjJlpiTGRyGX0MKXslnfUso14qRc6YWVgRUCkSZ6//qhCWScu0BRiYUmdKEjh7bW5hDMayS5mAnbenqT9vBptQs+60841QJsBgyiyWNUDNZpDQabnnpeQioEhkZt9x6tzQ7WCzczrueRMwXgUBRYJZJluOUN42Sv9rOR38NBtlXcbpWL+zqDjg7PC2/9vjtIJIk57nfwGJ6TUQd66eCAAAAABJRU5ErkJggg=="},jEty:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAaCAYAAACgoey0AAAAAXNSR0IArs4c6QAABBBJREFUSA2tVW1oW1UYPu+9SdOPMZs00XYItiiUrYw5mOAGwgrTdcl++MPBfk6GjFFE3UZSOoUrKzSpTivVwvyhlf0Qhn+UNKl12uGvKXYysdNhZQPXOpc1ibreaHN7Xp8b8nHT3GydyYHLOfd9n/M87/l430NiHc03qbUb4p9ewdwriLewIJ9g4cNUSSQWMV5kEjcUoi+EaIwn/dpf96KluwHaogN7JPExFtwH8rtiSzy0gmC+JKLRpD88XbKXj2zJvPFXu1dldoKZnyyH398fyGOKECeW9o/8tHZmhbB7MtQP0JsQbVwL/l//RIYq6IWlQHjCOh8BlZo7GjwJwXfrJmpSMztWWX7ojoWCJSUhisKtk6GXWIghq7OO4zQC8G76TmsucOaE26LBzQgtUjDWq8clu0pC6Xc5fQ+nAiPB7N9CaY8PdJr8OWEpxBncWlf9BGmaVDWQ9Ec2p/aHx48+s5zxRIOHDV3/5V8px0wdwmXaijP9oVZR3NIMOM6Sor6T9A9fKfB5o4O9BhlvYWGP52wkWFFpqwPneqgAsvbIw9+x/WOCaRB5vMHqs45J0AKKynvNLvX9hT3DSwWfb2rgseyqfMNg41mIlhrqgVwVhx3E/ITVbkFsbFGbz6xI41xWrpwFZmfJh60i+gYHNbqtsemTC72akco7O2e01rSeeQ2iL0LQaZ1TGBOLLQ7Uo86yiPJeZtFyR+r9af/IqQN87qnz8dkQSz6EC3MJH6pS5KIJvZDH757RHJf1zJH0cuZ17FRb3mzbobx2m2ecxhk/YIsgSmxwP/TIjV3HzPOr2pCj+xD8afAgO+7dcDx3HJhwHdBttnBm33Ly1vPwjdv5PVOhHjYgKHmvnb+qjcRvCpb9a1UAHCzkCWy1asVsmtG87mhoXBp8GRfv/kRNIuZriiIobiW1GXedn5o9YNp75rQGT2zgeEbPzEPwKExlAdnMtTWhqHxKZhnTb+oLQLTaomDMpRbRB8zyILbg0Wq49dhz+e6iDmVxh6YrQslVk2oTcWk6WMqTtYqa/FjE6dTTkT9zJbOrvesUTN9WE66XHav9saOzCVr5Wj2740jW5XQeRDiJeoms5UHu31TVhufmerSVorA5+GPv0DWnSruw8vm1k2r9N++IqjTsvr1v6GqBq/gem4ZEX3i+uaVpJ1b+fQFQa4/t/czpUrdbRU1O2CubJxZ8WUrxdqVn/RasEi8UDaUC4Y/tZjnsjCzNLbc8HUTXEaEHt3ujHb5oI3ELuBnk6cSSf/hziFtIiqjcoGLFGmvKaExPQNcDxCVs+yvpQORriJJ3erAb1Wo7iseDCgmPRGITKwmQJISDryT7InPl9NX/KlY89lW2A29wWiU6fts//FEh6nz/M6jMr+b2Hwj0g3IeQQD2AAAAAElFTkSuQmCC"}});
//# sourceMappingURL=11.5f0f7c788c1c2b81da75.js.map